<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Set up parameters for a general multispecies model — newMultispeciesParams • mizer</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Set up parameters for a general multispecies model — newMultispeciesParams" />
<meta property="og:description" content="Sets up a multi-species size spectrum model by filling all slots in the
MizerParams object based on user-provided or default
parameters. It does this by creating an empty MizerParams object with
emptyParams and then filling the slots by passing its arguments
to setParams. There is a long list of arguments, but almost
all of them have sensible default values. All arguments are described in more
details in the sections below the list." />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mizer</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.0.1.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/mizer.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Guides</a>
</li>
<li>
  <a href="../articles/publications.html">Publications</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sizespectrum/mizer">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Set up parameters for a general multispecies model</h1>
    <small class="dont-index"><a href='https://github.com/sizespectrum/mizer/edit/master/R/MizerParams-class.R'>Edit this page. &nbsp;</a> Source: <a href='https://github.com/sizespectrum/mizer/blob/master/R/MizerParams-class.R'><code>R/MizerParams-class.R</code></a></small>
    <div class="hidden name"><code>newMultispeciesParams.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Sets up a multi-species size spectrum model by filling all slots in the
<a href='MizerParams-class.html'>MizerParams</a> object based on user-provided or default
parameters. It does this by creating an empty MizerParams object with
<code><a href='emptyParams.html'>emptyParams</a></code> and then filling the slots by passing its arguments
to <code><a href='setParams.html'>setParams</a></code>. There is a long list of arguments, but almost
all of them have sensible default values. All arguments are described in more
details in the sections below the list.</p>
    </div>

    <pre class="usage"><span class='fu'>newMultispeciesParams</span>(
  <span class='no'>species_params</span>,
  <span class='kw'>interaction</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>no_w</span> <span class='kw'>=</span> <span class='fl'>100</span>,
  <span class='kw'>min_w</span> <span class='kw'>=</span> <span class='fl'>0.001</span>,
  <span class='kw'>max_w</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>min_w_pp</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>pred_kernel</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>search_vol</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>intake_max</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>metab</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>p</span> <span class='kw'>=</span> <span class='fl'>0.7</span>,
  <span class='kw'>z0</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>z0pre</span> <span class='kw'>=</span> <span class='fl'>0.6</span>,
  <span class='kw'>z0exp</span> <span class='kw'>=</span> <span class='no'>n</span> - <span class='fl'>1</span>,
  <span class='kw'>maturity</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>repro_prop</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>RDD</span> <span class='kw'>=</span> <span class='st'>"BevertonHoltRDD"</span>,
  <span class='kw'>rate</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>capacity</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>2</span>/<span class='fl'>3</span>,
  <span class='kw'>r_pp</span> <span class='kw'>=</span> <span class='fl'>10</span>,
  <span class='kw'>kappa</span> <span class='kw'>=</span> <span class='fl'>1e+11</span>,
  <span class='kw'>lambda</span> <span class='kw'>=</span> <span class='fl'>2.05</span>,
  <span class='kw'>w_pp_cutoff</span> <span class='kw'>=</span> <span class='fl'>10</span>,
  <span class='kw'>plankton_dynamics</span> <span class='kw'>=</span> <span class='st'>"plankton_semichemostat"</span>,
  <span class='kw'>initial_effort</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>species_params</th>
      <td><p>A data frame of species-specific parameter values.</p></td>
    </tr>
    <tr>
      <th>interaction</th>
      <td><p>Optional interaction matrix of the species (predator
species x prey species). Entries should be numbers between 0 and 1. By
default all entries are 1. See "Setting interactions" section below.</p></td>
    </tr>
    <tr>
      <th>no_w</th>
      <td><p>The number of size bins in the consumer spectrum.</p></td>
    </tr>
    <tr>
      <th>min_w</th>
      <td><p>Sets the size of the eggs of all species for which this is not
given in the <code>w_min</code> column of the <code>species_params</code> dataframe.</p></td>
    </tr>
    <tr>
      <th>max_w</th>
      <td><p>The largest size of the consumer spectrum. By default this is
set to the largest <code>w_inf</code> specified in the <code>species_params</code> data
frame.</p></td>
    </tr>
    <tr>
      <th>min_w_pp</th>
      <td><p>The smallest size of the plankton spectrum. By default this
is set to the smallest value at which any of the consumers can feed.</p></td>
    </tr>
    <tr>
      <th>pred_kernel</th>
      <td><p>Optional. An array (species x predator size x prey size)
that holds the predation coefficient of each predator at size on each prey
size. If not supplied, a default is set as described in section "Setting
predation kernel".</p></td>
    </tr>
    <tr>
      <th>search_vol</th>
      <td><p>Optional. An array (species x size) holding the search volume
for each species at size. If not supplied, a default is set as described in
the section "Setting search volume".</p></td>
    </tr>
    <tr>
      <th>intake_max</th>
      <td><p>Optional. An array (species x size) holding the maximum
intake rate for each species at size. If not supplied, a default is set as
described in the section "Setting maximum intake rate".</p></td>
    </tr>
    <tr>
      <th>metab</th>
      <td><p>Optional. An array (species x size) holding the metabolic rate
for each species at size. If not supplied, a default is set as described in
the section "Setting metabolic rate".</p></td>
    </tr>
    <tr>
      <th>p</th>
      <td><p>The allometric metabolic exponent. This is only used if <code>metab</code>
is not given explicitly and if the exponent is not specified in a <code>p</code>
column in the <code>species_params</code>.</p></td>
    </tr>
    <tr>
      <th>z0</th>
      <td><p>Optional. An array (species x size) holding the external
mortality rate.</p></td>
    </tr>
    <tr>
      <th>z0pre</th>
      <td><p>If <code>z0</code>, the mortality from other sources, is not a column
in the species data frame, it is calculated as z0pre * w_inf ^ z0exp.
Default value is 0.6.</p></td>
    </tr>
    <tr>
      <th>z0exp</th>
      <td><p>If <code>z0</code>, the mortality from other sources, is not a column
in the species data frame, it is calculated as <code>z0pre * w_inf ^ z0exp</code>.
Default value is <code>n-1</code>.</p></td>
    </tr>
    <tr>
      <th>maturity</th>
      <td><p>Optional. An array (species x size) that holds the proportion
of individuals of each species at size that are mature. If not supplied, a
default is set as described in the section "Setting reproduction".</p></td>
    </tr>
    <tr>
      <th>repro_prop</th>
      <td><p>Optional. An array (species x size) that holds the
proportion of consumed energy that a mature individual allocates to
reproduction for each species at size. If not supplied, a default is set as
described in the section "Setting reproduction".</p></td>
    </tr>
    <tr>
      <th>RDD</th>
      <td><p>The name of the function calculating the density-dependent 
reproduction rate from the density-independent rate. Defaults to 
"<code><a href='BevertonHoltRDD.html'>BevertonHoltRDD</a></code>".</p></td>
    </tr>
    <tr>
      <th>rate</th>
      <td><p>Optional. Vector of plankton intrinsic birth rates</p></td>
    </tr>
    <tr>
      <th>capacity</th>
      <td><p>Optional. Vector of plankton intrinsic carrying capacity</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>The allometric growth exponent. This can be overruled for individual
species by including a <code>n</code> column in the <code>species_params</code>.</p></td>
    </tr>
    <tr>
      <th>r_pp</th>
      <td><p>Coefficient of the intrinsic plankton birth rate</p></td>
    </tr>
    <tr>
      <th>kappa</th>
      <td><p>Coefficient of the intrinsic plankton carrying capacity</p></td>
    </tr>
    <tr>
      <th>lambda</th>
      <td><p>Scaling exponent of the intrinsic plankton carrying capacity</p></td>
    </tr>
    <tr>
      <th>w_pp_cutoff</th>
      <td><p>The upper cut off size of the plankton spectrum. 
Default is 10 g.</p></td>
    </tr>
    <tr>
      <th>plankton_dynamics</th>
      <td><p>Function that determines plankton dynamics by
calculating the plankton spectrum at the next time step from the current
state.</p></td>
    </tr>
    <tr>
      <th>initial_effort</th>
      <td><p>Optional. A number or a named numeric vector specifying
the fishing effort. If a number, the same effort is used for all gears. If
a vector, must be named by gear.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of type <a href='MizerParams-class.html'>MizerParams</a></p>
    <h2 class="hasAnchor" id="species-parameters"><a class="anchor" href="#species-parameters"></a>Species parameters</h2>

    

<p>The only essential argument is a data frame that contains the species
parameters. The data frame is arranged species by parameter, so each column
of the parameter data frame is a parameter and each row has the values of the
parameters for one of the species in the model.</p>
<p>There are two essential columns that must be included in the species
parameter data.frame and that do not have default values: the 
<code>species</code> column that should hold strings with the names of the
species and the <code>w_inf</code> column with the asymptotic sizes of the species.</p>
<p>The species_params dataframe also needs to contain the parameters needed
by any predation kernel function or size selectivity function. This will
be mentioned in the appropriate sections below.</p>
<p>For all other species parameters, mizer will calculate default values if they
are not included in the species parameter data frame. They will be
automatically added when the <code>MizerParams</code> object is created. For these
parameters you can also specify values for only some species and leave the
other entries as NA and the missing values will be set to the defaults.</p>
<p>All the parameters will be mentioned in the following sections.</p>
    <h2 class="hasAnchor" id="changes-to-species-params"><a class="anchor" href="#changes-to-species-params"></a>Changes to species params</h2>

    

<p>The <code>species_params</code> slot of the returned MizerParams object may differ
slightly from the data frame supplied as argument to this function in the
following ways:</p><ul>
<li><p>Default values are set for <code>w_min, w_inf, alpha, gear, interaction_p</code>.</p></li>
<li><p>The egg sizes in <code>w_min</code> are rounded down to lie on a grid point.</p></li>
</ul><p>Note that the other characteristic sizes of the species, like <code>w_mat</code> and
<code>w_inf</code>, are not modified to lie on grid points.</p>
    <h2 class="hasAnchor" id="size-grid"><a class="anchor" href="#size-grid"></a>Size grid</h2>

    

<p>A size grid is created so that
the log-sizes are equally spaced. The spacing is chosen so that there will be
<code>no_w</code> fish size bins, with the smallest starting at <code>min_w</code> and the largest
starting at <code>max_w</code>. For <code>w_full</code> additional size bins are added below
<code>min_w</code>, with the same log size. The number of extra bins is such that
<code>min_w_pp</code> comes to lie within the smallest bin.</p>
    <h2 class="hasAnchor" id="units-in-mizer"><a class="anchor" href="#units-in-mizer"></a>Units in mizer</h2>

    

<p>Mizer uses grams to measure weight, centimetres to measure lengths, and
years to measure time.</p>
<p>Mizer is agnostic about whether abundances are given as</p><ol>
<li><p>numbers per area,</p></li>
<li><p>numbers per volume or</p></li>
<li><p>total numbers for the entire study area.</p></li>
</ol>

<p>You should make the choice most convenient for your application and then
stick with it. If you make choice 1 or 2 you will also have to choose a unit
for area or volume. Your choice will then determine the units for some of
the parameters. This will be mentioned when the parameters are discussed in
the sections below.</p>
<p>You choice will also affect the units of the quantities you may want to
calculate with the model. For example, the yield will be in grams/year/m^2 in
case 1 if you choose m^2 as your measure of area, in grams/year/m^3 in case 2
if you choose m^3 as your unit of volume, or simply grams/year in case 3. The
same comment applies for other measures, like total biomass, which will be
grams/area in case 1, grams/volume in case 2 or simply grams in case 3. When
mizer puts units on axes, for example in <code>plotBiomass</code>, it will simply
put grams, as appropriate for case 3.</p>
<p>You can convert between these choices. For example, if you use case 1, you
need to multiply with the area of the ecosystem to get the total quantity.
If you work with case 2, you need to multiply by both area and the thickness
of the productive layer. In that respect, case 2 is a bit cumbersome.</p>
    <h2 class="hasAnchor" id="setting-interactions"><a class="anchor" href="#setting-interactions"></a>Setting interactions</h2>

    


<p>The species interaction matrix \(\theta_{ij}\), is used when calculating
the food encounter rate in <code><a href='getEncounter.html'>getEncounter</a></code> and the predation
mortality rate in <code><a href='getPredMort.html'>getPredMort</a></code>. Its entries are dimensionless
numbers between 0 and 1 that characterise the strength at which predator
species \(i\) predates on prey species \(j\).</p>
<p>This function checks that the supplied interaction matrix is valid and then
stores it in the <code>interaction</code> slot of the params object before
returning that object.</p>
<p>The order of the columns and rows of the <code>interaction</code> argument should
be the same as the order in the species params dataframe in the
<code>params</code> object. If you supply a named array then the function will
check the order and warn if it is different.</p>
<p>The interaction of the species with the plankton are set via a column
<code>interaction_p</code> in the <code>species_params</code> data frame. Again the
entries have to be numbers between 0 and 1. By default this column is set
to all 1s.</p>
    <h2 class="hasAnchor" id="setting-predation-kernel"><a class="anchor" href="#setting-predation-kernel"></a>Setting predation kernel</h2>

    

<p><strong>Kernel dependent on predator to prey size ratio</strong></p>
<p>If the <code>pred_kernel</code> argument is not supplied, then this function sets a
predation kernel that depends only on the ratio of predator mass to prey
mass, not on the two masses independently. The shape of that kernel is then
determined by the <code>pred_kernel_type</code> column in species_params.</p>
<p>The default pred_kernel_type is "lognormal". This will call the function
<code><a href='lognormal_pred_kernel.html'>lognormal_pred_kernel</a></code> to calculate the predation kernel.
An alternative pred_kernel type is "box", implemented by the function
<code><a href='box_pred_kernel.html'>box_pred_kernel</a></code>, and "power_law", implemented by the function
<code><a href='power_law_pred_kernel.html'>power_law_pred_kernel</a></code>. These functions require certain species
parameters in the species_params data frame. For the lognormal kernel these
are <code>beta</code> and <code>sigma</code>, for the box kernel they are <code>ppmr_min</code>
and <code>ppmr_max</code>. They are explained in the help pages for the kernel
functions. Except for <code>beta</code> and <code>sigma</code>, no defaults are set for
these parameters. If they are missing from the species_params data frame then
mizer will issue an error message.</p>
<p>You can use any other string as the type. If for example you choose "my" then
you need to define a function <code>my_pred_kernel</code> that you can model on the
existing functions like <code><a href='lognormal_pred_kernel.html'>lognormal_pred_kernel</a></code>.</p>
<p>When using a kernel that depends on the predator/prey size ratio only, mizer
does not need to store the entire three dimensional array in the MizerParams
object. Such an array can be very big when there is a large number of size
bins. Instead, mizer only needs to store two two-dimensional arrays that hold
Fourier transforms of the feeding kernel function that allow the encounter
rate and the predation rate to be calculated very efficiently. However, if
you need the full three-dimensional array you can calculate it with the
<code><a href='getPredationKernel.html'>getPredationKernel</a></code> function.</p>
<p><strong>Kernel dependent on both predator and prey size</strong></p>
<p>If you want to work with a feeding kernel that depends on predator mass and
prey mass independently, you can specify the full feeding kernel as a
three-dimensional array (predator species x predator size x prey size).</p>
<p>You should use this option only if a kernel dependent only on the
predator/prey mass ratio is not appropriate. Using a kernel dependent on
predator/prey mass ratio only allows mizer to use fast Fourier transform
methods to significantly reduce the running time of simulations.</p>
<p>The order of the predator species in <code>pred_kernel</code> should be the same
as the order in the species params dataframe in the `params` object. If you
supply a named array then the function will check the order and warn if it is
different.</p>
    <h2 class="hasAnchor" id="setting-search-volume"><a class="anchor" href="#setting-search-volume"></a>Setting search volume</h2>

    

<p>The search volume \(\gamma_i(w)\) of an individual of species \(i\)
and weight \(w\) multiplies the predation kernel when
calculating the encounter rate in <code><a href='getEncounter.html'>getEncounter</a></code> and the 
predation rate in <code><a href='getPredRate.html'>getPredRate</a></code>.</p>
<p>The name "search volume" is a bit misleading, because \(\gamma_i(w)\) does
not have units of volume. It is simply a parameter that determines the rate
of predation. Its units depend on your choice, see section "Units in mizer".
If you have chose to work with total abundances, then it is a rate with units
1/year. If you have chosen to work with abundances per m^2 then it has units
of m^2/year. If you have chosen to work with abundances per m^3 then it has
units of m^3/year.</p>
<p>If the <code>search_vol</code> argument is not supplied, then the search volume is 
set to
$$\gamma_i(w) = \gamma_i w^q_i.$$ 
The values of \(\gamma_i\) (the search volume at 1g) and \(q_i\) (the
allometric exponent of the search volume) are taken from the <code>gamma</code> and
<code>q</code> columns in the species parameter dataframe. If the <code>gamma</code>
column is not supplied in the species parameter dataframe, a default is
calculated by the <code><a href='get_gamma_default.html'>get_gamma_default</a></code> function. Note that only
for predators of size \(w = 1\) gram is the value of the species parameter
\(\gamma_i\) the same as the value of the search volume \(\gamma_i(w)\).</p>
    <h2 class="hasAnchor" id="setting-maximum-intake-rate"><a class="anchor" href="#setting-maximum-intake-rate"></a>Setting maximum intake rate</h2>

    

<p>The maximum intake rate \(h_i(w)\) of an individual of species \(i\) and
weight \(w\) determines the feeding level, calculated with
<code><a href='getFeedingLevel.html'>getFeedingLevel</a></code>. It is measured in grams/year.</p>
<p>If the <code>intake_max</code> argument is not supplied, then the maximum intake
rate is set to $$h_i(w) = h_i w^n_i.$$ 
The values of \(h_i\) (the maximum intake rate of an individual of size 1
gram) and \(n_i\) (the allometric exponent for the intake rate) are taken
from the <code>h</code> and <code>n</code> columns in the species parameter dataframe. If
the <code>h</code> column is not supplied in the species parameter dataframe, it is
calculated by the <code><a href='get_h_default.html'>get_h_default</a></code> function, using <code>f0</code> and
the <code>k_vb</code> column, if they are supplied.</p>
<p>If \(h_i\) is set to <code>Inf</code>, fish will consume all encountered food.</p>
    <h2 class="hasAnchor" id="setting-metabolic-rate"><a class="anchor" href="#setting-metabolic-rate"></a>Setting metabolic rate</h2>

    

<p>The metabolic rate is subtracted from the energy income rate to calculate
the rate at which energy is available for growth and reproduction, see
<code><a href='getEReproAndGrowth.html'>getEReproAndGrowth</a></code>. It is measured in grams/year.</p>
<p>If the <code>metab</code> argument is not supplied, then for each species the
metabolic rate \(k(w)\) for an individual of size \(w\) is set to
$$k(w) = ks w^p + k w,$$
where \(ks w^p\) represents the rate of standard metabolism and \(k w\)
is the rate at which energy is expended on activity and movement. The values
of \(ks\), \(p\) and \(k\) are taken from the <code>ks</code>, <code>p</code> and
<code>k</code> columns in the species parameter dataframe. If any of these
parameters are not supplied, the defaults are \(k = 0\), \(p = n\) and
$$ks = f_c h \alpha w_{mat}^{n-p},$$
where \(f_c\) is the critical feeding level taken from the <code>fc</code> column
in the species parameter data frame. If the critical feeding level is not
specified, a default of \(f_c = 0.2\) is used.</p>
    <h2 class="hasAnchor" id="setting-external-mortality-rate"><a class="anchor" href="#setting-external-mortality-rate"></a>Setting external mortality rate</h2>

    

<p>The external mortality is all the mortality that is not due to fishing or
predation by predators included in the model. The external mortality could be
due to predation by predators that are not explicitly included in the model
(e.g. mammals or seabirds) or due to other causes like illness. It is a rate
with units 1/year.</p>
<p>The <code>z0</code> argument allows you to specify an external mortality rate
that depends on species and body size. You can see an example of this in
the Examples section of the help page for <code><a href='setExtMortality.html'>setExtMortality</a></code>.</p>
<p>If the <code>z0</code> argument is not supplied, then the external mortality
is assumed to depend only on the species, not on the
size of the individual: \(\mu_{b.i}(w) = z_{0.i}\). The value of the
constant \(z_0\) for each species is taken from the <code>z0</code> column of the
species_params data frame, if that column exists. Otherwise it is calculated
as 
$$z_{0.i} = {\tt z0pre}_i\, w_{inf}^{\tt z0exp}.$$</p>
    <h2 class="hasAnchor" id="setting-reproduction"><a class="anchor" href="#setting-reproduction"></a>Setting reproduction</h2>

    


<h3>Investment</h3>
<p>For each species and at each size, the proportion of the available energy 
that is invested into reproduction is the product of two factors: the
proportion <code>maturity</code> of individuals that are mature and the proportion
<code>repro_prop</code> of the energy available to a mature individual that is 
invested into reproduction.</p>
<p>If the <code>maturity</code> argument is not supplied, then it is set to a sigmoidal 
maturity ogive that changes from 0 to 1 at around the maturity size:
$${\tt maturity}(w) = \left[1+\left(\frac{w}{w_{mat}}\right)^{-U}\right]^{-1}.$$
(To avoid clutter, we are not showing the species index in the equations.)
The maturity weights are taken from the <code>w_mat</code> column of the 
species_params data frame. Any missing maturity weights are set to 1/4 of the
asymptotic weight in the <code>w_inf</code> column.
The exponent \(U\) determines the steepness of the maturity ogive. By
default it is chosen as \(U = 10\), however this can be overridden by
including a column <code>w_mat25</code> in the species parameter dataframe that
specifies the weight at which 25% of individuals are mature, which sets
\(U = \log(3) / \log(w_{mat} / w_{25}).\)</p>
<p>The sigmoidal function given above would strictly reach 1 only asymptotically.
Mizer instead sets the function equal to 1 already at the species' 
maximum size, taken from the compulsory <code>w_inf</code> column in the
<code>species_params</code> data frame.</p>
<p>If the <code>repro_prop</code> argument is not supplied, it is set to the
allometric form
$${\tt repro\_prop}(w) = \left(\frac{w}{w_{inf}}\right)^{m-n}.$$
Here \(n\) is the scaling exponent of the energy income rate. Hence
the exponent \(m\) determines the scaling of the investment into
reproduction for mature individuals. By default it is chosen to be 
\(m = 1\) so that the rate at which energy is invested into reproduction 
scales linearly with the size. This default can be overridden by including a 
column <code>m</code> in the species parameter dataframe. The asymptotic sizes
are taken from the compulsory <code>w_inf</code> column in the species_params
data frame.</p>

<h3>Efficiency</h3>
<p>The reproductive efficiency, i.e., the proportion of energy allocated to
reproduction that results in egg biomass, is set from the <code>erepro</code>
column in the species_params data frame. If that is not provided, the default
is set to 1 (which you will want to override). The offspring biomass divided
by the egg biomass gives the rate of egg production, returned by
<code><a href='getRDI.html'>getRDI</a></code>.</p>

<h3>Density dependence</h3>
<p>The stock-recruitment relationship is an emergent phenomenon in mizer, with
several sources of density dependence. Firstly, the amount of energy invested
into reproduction depends on the energy income of the spawners, which is
density-dependent due to competition for prey. Secondly, the proportion of
larvae that grow up to recruitment size depends on the larval mortality,
which depends on the density of predators, and on larval growth rate, which
depends on density of prey.</p>
<p>Finally, to encode all the density dependence in the stock-recruitment
relationship that is not already included in the other two sources of density
dependence, mizer puts the the density-independent rate of egg production
through a density-dependence function. The result is returned by
<code><a href='getRDD.html'>getRDD</a></code>. The name of the density-dependence function is
specified by the <code>RDD</code> argument. The default is the Beverton-Holt
function <code><a href='BevertonHoltRDD.html'>BevertonHoltRDD</a></code>, which requires an <code>R_max</code> column
in the species_params data frame giving the maximum egg production rate. If
this column does not exist, it is initialised to <code>Inf</code>, leading to no
density-dependence. Other functions provided by mizer are
<code><a href='RickerRDD.html'>RickerRDD</a></code> and <code><a href='SheperdRDD.html'>SheperdRDD</a></code> and you can easily use
these as models for writing your own functions.</p>

    <h2 class="hasAnchor" id="setting-fishing"><a class="anchor" href="#setting-fishing"></a>Setting fishing</h2>

    


<p><strong>Gears</strong></p>
<p>In <code>mizer</code>, fishing mortality is imposed on species by fishing gears. The
total fishing mortality is obtained by summing over the mortality from all
gears,
$$\mu_{f.i}(w) = \sum_g F_{g,i}(w),$$
where the fishing mortality \(F_{g,i}(w)\) imposed by gear \(g\) on
species \(i\) at size \(w\) is calculated as:
$$F_{g,i}(w) = S_{g,i}(w) Q_{g,i} E_{g},$$
where \(S\) is the selectivity by species, gear and size, \(Q\) is the
catchability by species and gear and \(E\) is the fishing effort by gear.</p>
<p>At the moment a species can only be selected by one fishing gear, although
each gear can select more than one species (this is a limitation with the
current package that will be developed in future releases). The gear
selecting each species can be specified in the <code>gear</code> column in the
species_params data frame. If no gear is specified, the default gear is
"knife_edge_gear".</p>
<p><strong>Selectivity</strong></p>
<p>The selectivity at size of each gear has a range between 0 (not selected at
that size) to 1 (fully selected at that size). It is given by a selectivity
function. The name of the selectivity function is given by the <code>sel_func</code>
column in the species parameters data frame. Some selectivity functions are
included in the package: <code><a href='knife_edge.html'>knife_edge()</a></code>, <code><a href='sigmoid_length.html'>sigmoid_length()</a></code>,
<code><a href='double_sigmoid_length.html'>double_sigmoid_length()</a></code>, and <code><a href='sigmoid_weight.html'>sigmoid_weight()</a></code>. New functions can be defined
by the user. Each
gear has the same selectivity function for all the species it selects, but
the parameter values for each species may be different, e.g. the lengths of
species that a gear selects may be different.</p>
<p>Each selectivity function has a range of parameters. Values for these
parameters must be included as columns in the species parameters data.frame.
The names of the columns must exactly match the names of the corresponding
arguments of the selectivity function. For example, the default selectivity
function is <code><a href='knife_edge.html'>knife_edge()</a></code> which has sudden change of selectivity from 0 to 1
at a certain size. In its help page you can see that the <code><a href='knife_edge.html'>knife_edge()</a></code>
function has arguments <code>w</code> and <code>knife_edge_size</code> The first argument, <code>w</code>, is
size (the function calculates selectivity at size). All selectivity functions
must have <code>w</code> as the first argument. The values for the other arguments must
be found in the species parameters data.frame. So for the <code><a href='knife_edge.html'>knife_edge()</a></code>
function there should be a <code>knife_edge_size</code> column. Because <code><a href='knife_edge.html'>knife_edge()</a></code>
is the default selectivity function, the <code>knife_edge_size</code> argument has a
default value = <code>w_mat</code>.</p>
<p><strong>Catchability</strong></p>
<p>Catchability is used as an additional scalar to make the link between gear
selectivity, fishing effort and fishing mortality. For example, it can be set
so that an effort of 1 gives a desired fishing mortality.
In this way effort can then be specified relative to a 'base effort', e.g.
the effort in a particular year.</p>
<p>Because currently mizer only allows one gear to select each species, the
catchability matrix \(Q_{g,i}\) reduces to a catchability vector
\(Q_{i}\), and this is given as a column <code>catchability</code> in the species
parameter data frame. If it is not specified, it defaults to 1.</p>
<p><strong>Effort</strong></p>
<p>The initial fishing effort is stored in the <code>MizerParams</code> object. If it is
not supplied, it is set to zero. The initial effort can be overruled when
the simulation is run with <code><a href='project.html'>project()</a></code>, where it is also possible to specify
an effort that varies through time.</p>
    <h2 class="hasAnchor" id="setting-plankton-dynamics"><a class="anchor" href="#setting-plankton-dynamics"></a>Setting plankton dynamics</h2>

    

<p>By default, mizer uses a semichemostat model to describe the plankton
dynamics in each size class independently. This semichemostat dynamics is implemented
by the function <code><a href='plankton_semichemostat.html'>plankton_semichemostat</a></code>. You can change the
plankton dynamics by writing your own function, modelled on
<code><a href='plankton_semichemostat.html'>plankton_semichemostat</a></code>, and then passing the name of your
function in the <code>plankton_dynamics</code> argument.</p>
<p>The <code>rate</code> argument is a vector specifying the intrinsic plankton
growth rate for each size class. If it is not supplied, then the intrinsic growth
rate \(r_p(w)\) at size \(w\)
is set to $$r_p(w) = r_p\, w^{n-1}.$$
The values of \(r_p\) and \(n\) are taken from the <code>r_pp</code>
and <code>n</code> arguments.</p>
<p>The <code>capacity</code> argument is a vector specifying the intrinsic plankton
carrying capacity for each size class. If it is not supplied, then the intrinsic carrying
capacity \(c_p(w)\) at size \(w\)
is set to $$c_p(w) = \kappa\, w^{-\lambda}$$
for all \(w\) less than <code>w_pp_cutoff</code> and zero for larger sizes.
The values of \(\kappa\) and \(\lambda\) are taken from the <code>kappa</code>
and <code>lambda</code> arguments.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='project.html'>project</a></code>, <a href='MizerSim-class.html'>MizerSim</a>,
  <code><a href='newCommunityParams.html'>newCommunityParams</a></code>, <code><a href='newTraitParams.html'>newTraitParams</a></code></p>
<p>Other functions for setting up models: 
<code><a href='newCommunityParams.html'>newCommunityParams</a>()</code>,
<code><a href='newTraitParams.html'>newTraitParams</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='no'>params</span> <span class='kw'>&lt;-</span> <span class='fu'>newMultispeciesParams</span>(<span class='no'>NS_species_params_gears</span>, <span class='no'>inter</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#species-parameters">Species parameters</a></li>
      <li><a href="#changes-to-species-params">Changes to species params</a></li>
      <li><a href="#size-grid">Size grid</a></li>
      <li><a href="#units-in-mizer">Units in mizer</a></li>
      <li><a href="#setting-interactions">Setting interactions</a></li>
      <li><a href="#setting-predation-kernel">Setting predation kernel</a></li>
      <li><a href="#setting-search-volume">Setting search volume</a></li>
      <li><a href="#setting-maximum-intake-rate">Setting maximum intake rate</a></li>
      <li><a href="#setting-metabolic-rate">Setting metabolic rate</a></li>
      <li><a href="#setting-external-mortality-rate">Setting external mortality rate</a></li>
      <li><a href="#setting-reproduction">Setting reproduction</a></li>
      <li><a href="#setting-fishing">Setting fishing</a></li>
      <li><a href="#setting-plankton-dynamics">Setting plankton dynamics</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Finlay Scott, <a href='http://www.utas.edu.au/profiles/staff/imas/julia-blanchard'>Julia Blanchard</a>, <a href='https://ken.haste.dk/'>Ken Andersen</a>, <a href='https://www.york.ac.uk/maths/staff/gustav-delius/'>Gustav Delius</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


